<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>女士鞋</title>
    <link href="css/common.css" type="text/css" rel="stylesheet">
    <link href="css/womenshoes.css" type="text/css" rel="stylesheet">
</head>
<body>
<!-----------------------------------header---------------------------------------->
<div class="header">
    <div class="headerTop clear">
        <div class="wrapper">
            <div class="left"><span class="currentMember"></span>您好，欢迎来到乐淘商城！</div>
            <div class="right">
                <ul class="ulHide">
                    <li><a href="login.html">登录</a></li>
                    <li>|</li>
                    <li><a href="register.html">注册</a></li>
                    <li>|</li>
                    <li><a href="#">我的收藏</a></li>
                    <li>|</li>
                </ul>
                <ul style="display:none;" class="ulShow">
                    <li><a href="javascript:;">退出</a></li>
                    <li>|</li>
                    <li><a href="javascript:;">我的收藏</a></li>
                    <li>|</li>
                    <li><a href="javascript:;">个人中心</a></li>
                    <li>|</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="headerCenter">
        <div class="wrapper clear">
            <div class="left hcLeft"><img src="images/img1/logo.png"></div>
            <div class="left hcCenter">
                <ul>
                    <li><img src="images/img1/icon_search.png"></li>
                    <li><input type="text" class="searchIpt1" placeholder></li>
                    <li><button class="searchBtn">搜索</button></li>
                </ul>
            </div>
            <div class="left hcRight myshoppingcar">
                <span class="span1">我的购物车</span>
                <span class="span2">0</span>
                <div class="cartClear">您的购物车还没有商品，快去逛逛吧~</div>
            </div>

        </div>
    </div>

    <div class="headerBottom">
        <div class="wrapper">
            <ul class="clear">
                <li class="all"><a href="#"><img src="images/img1/icon_all.png">商品分类</a>

                    <div class="erji">
                        <div class="erjiTop">
                            <a href="#">
                                <p><img src="images/img1/ef872b811e854195b2ac0595205f12f0.gif">
                                    <a href="javascript:void(0)">运动鞋</a>
                                    <i><img src="images/img1/icon_dirL.png"></i>
                                </p>
                                <p>品牌 款式</p>
                            </a>
                            <div class="sanji">
                                <p><a><span>运动鞋&nbsp;</span><i><img src="images/img1/icon_dirL.png"></i></a></p>
                                <div class="sanjiCenter clear">
                                    <div class="left">品牌 &nbsp; &gt;</div>
                                    <div class="left">
                                        <ul>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">耐克</a></li>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">阿迪达斯</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="sanjiBottom clear">
                                    <div class="left">款式 &nbsp; &gt;</div>
                                    <div class="left">
                                        <ul>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">板鞋</a></li>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">跑步鞋</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="erjiCenter">
                            <a href="#">
                                <p><img src="images/img1/b46722cdd6ed4d19816cc3feb23d9ea9.gif">
                                    <a href="javascript:void(0)">女鞋</a>
                                    <i><img src="images/img1/icon_dirL.png"></i>
                                </p>
                                <p>品牌 款式</p>
                            </a>
                            <div class="sanji">
                                <p><a><span>女鞋&nbsp;</span><i><img src="images/img1/icon_dirL.png"></i></a></p>
                                <div class="sanjiCenter clear">
                                    <div class="left">品牌 &nbsp; &gt;</div>
                                    <div class="left">
                                        <ul>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">耐克</a></li>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">阿迪达斯</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="sanjiBottom clear">
                                    <div class="left">款式 &nbsp; &gt;</div>
                                    <div class="left">
                                        <ul>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">板鞋</a></li>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">跑步鞋</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="erjiBottom">
                            <a href="#">
                                <p><img src="images/img1/3e2ec06d9836487db9633eee083c690d.gif">
                                    <a href="javascript:void(0)">男鞋</a>
                                    <i><img src="images/img1/icon_dirL.png"></i>
                                </p>
                                <p>品牌 款式</p>
                            </a>
                            <div class="sanji">
                                <p><a><span>男鞋&nbsp;</span><i><img src="images/img1/icon_dirL.png"></i></a></p>
                                <div class="sanjiCenter clear">
                                    <div class="left">品牌 &nbsp; &gt;</div>
                                    <div class="left">
                                        <ul>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">耐克</a></li>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">阿迪达斯</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="sanjiBottom clear">
                                    <div class="left">款式 &nbsp; &gt;</div>
                                    <div class="left">
                                        <ul>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">板鞋</a></li>
                                            <li>|</li>
                                            <li><a href="javascript:void(0)">跑步鞋</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </li>
                <li><a href="#">首页</a></li>
                <li>|</li>
                <li><a href="#">运动休闲鞋</a></li>
                <li>|</li>
                <li><a href="#">帆布鞋</a></li>
                <li>|</li>
                <li><a href="#">户外鞋</a></li>
                <li>|</li>
                <li><a href="#">男鞋</a></li>
                <li>|</li>
                <li class="womenBtn"><a href="#">女鞋</a></li>
            </ul>
        </div>
    </div>

</div>
<!-------------------------body---------------------------------->
<div class="productBox">
    <div class="wrapper">
        <ul class="priceArea">
            <li style="background-color: #c5ced3">价格</li>
            <li><a href="#">100-199</a></li>
            <li><a href="#">200-299</a></li>
            <li><a href="#">300-399</a></li>
            <li><a href="#">400-499</a></li>
            <li><a href="#">500-599</a></li>
        </ul>
        <div class="sort clear">
            <ul class="clear left">
                <li class="timeSort" style="background-color:red;"><a href="#" style="color:white;">上架时间</a></li>
                <li class="numSort"><a href="#">销量</a></li>
                <li class="priceSort"><a href="#">价格由低到高</a></li>
            </ul>
            <div class="right" style="height:30px;text-align: center;"><ul class="page" maxshowpageitem="5" pagelistcount="12"  id="page"></ul></div>

        </div>

        <ul id="content" class="clear"></ul>

        <!--<div style="margin:20px 0;height:30px;text-align: center;"><ul class="page" maxshowpageitem="5" pagelistcount="12"  id="page1"></ul></div>-->

    </div>
</div>
<!-----------------------foot footer---------------------------->
<div class="foot">
    <div class="wrapper">
        <ul class="clear">
            <li>
                <h4>新手帮助</h4>
                <p><a href="javascript:;">玩转乐淘</a></p>
                <p><a href="javascript:;">常见问题</a></p>
                <p><a href="javascript:;">优惠指南</a></p>
            </li>
            <li>
                <h4>购物指南</h4>
                <p><a href="javascript:;">尺码选择</a></p>
                <p><a href="javascript:;">配送运费</a></p>
                <p><a href="javascript:;">签收/验货</a></p>
            </li>
            <li>
                <h4>支付/配送</h4>
                <p><a href="javascript:;">在线支付</a></p>
                <p><a href="javascript:;">物流查询</a></p>
                <p><a href="javascript:;">发货时间</a></p>
            </li>
            <li>
                <h4>售后服务</h4>
                <p><a href="javascript:;">退换货办理</a></p>
                <p><a href="javascript:;">退换货政策</a></p>
                <p><a href="javascript:;">退款说明</a></p>
            </li>
            <li>
                <h4>联系乐淘</h4>
                <p><a href="javascript:;">400-0022-188</a></p>
                <p><a href="javascript:;">其他联系方式</a></p>
                <p><a href="javascript:;">品牌招商</a></p>
            </li>
            <li>
                <h4>APP下载</h4>
                <p><a href="javascript:;">安卓版</a></p>
                <p><a href="javascript:;">苹果版</a></p>
            </li>
        </ul>
        <div class="erweima">
            <p>扫码关注我们</p>
            <img src="images/img1/9bba548344b34a8d8dd4a026e067a0aa.png">
        </div>
    </div>
</div>

<footer>
    <p><span>Copyright @ 2008-2017 letao Inc.乐淘网 版权所有 买鞋子 上乐淘 <i>粤ICP备14019125号</i></span></p>
</footer>
</body>

<style>
    #content{width:100%;padding:10px 0;}
    #content li{width:275px;margin-bottom:11px;padding:10px;}
    #content li:hover{/*border:1px solid #c5ced3;*/background:#c5ced3;}
    .img{width:100%;height:300px;}
    .price{font-size: 18px;color:red;margin:20px 0;}
    .desc{font-size:16px;margin-bottom:20px;width:300px;height:50px;overflow:hidden;}
    .see{float:left;font-size:15px;}
    .num{float:right;font-size:15px;}
    .pay{float:right;color:red;border:1px solid #ccc;padding:10px;}
</style>
<script src="js/jquery-1.11.3.js"></script>
<script>
    //获取userName
    var search = window.location.search;
    if (search.indexOf("userName") != -1) {
        var tmp = search.split("?")[1];
        var temp1 = tmp.split("&")[0];
        var temp2 = tmp.split("&")[1];
        var userName = temp1.split("=")[1];
        var id = temp2.split("=")[1];//得到用户id
        $(".currentMember").html(userName);
        $(".cartClear").hide();
        $(".ulHide").hide();
        $(".ulShow").show();
        $(".ulShow .ulShowli1").click(function () {
            $(".currentMember").html("");
            $(".ulHide").show();
            $(".ulShow").hide();
        })

        var search = window.location.search;
        if (search.indexOf("id") != -1) {
            $.ajax({
                type: "get",
                url: "http://bxu2359550159.my3w.com/letaophp/myshoppingcart.php",
                data: {userId: id},
                dataType: "json",
                success: function (result) {
                    var count = 0;
                    $(result).each(function (index, item) {
                        //console.log(item);//"1" "1" "1" "1"
                        // "Red dream lover 女式 新款真皮坡跟凉鞋欧美风防水台高跟夏季水钻休闲凉鞋CZ708"
                        //"298"  "28"  "CZ708_017_1.JPG"
                        count += item[3] * 1;//item[3]为num
                    })
                    if (count == 0) {
                        $(".span2").html(0);
                    } else {
                        $(".span2").html(count);
                    }
                }
            });
        }
    }
    /*var json = [
        {"goodname":"Red dream lover 女式 新款真皮坡跟凉鞋欧美风防水台高跟夏季水钻休闲凉鞋",
            "goodId":"1","goodPrice":298,"goodNum":"0001","goodSrc":"img6/CZ708_027_1.JPG"},
        {"goodname":"Red dream lover 女式 新款真皮坡跟凉鞋欧美风防水台高跟夏季水钻休闲凉鞋",
            "goodId":"1","goodPrice":298,"goodNum":"0001","goodSrc":"img6/CZ708_027_1.JPG"},
        {"goodname":"Red dream lover 女式 新款真皮坡跟凉鞋欧美风防水台高跟夏季水钻休闲凉鞋",
            "goodId":"1","goodPrice":298,"goodNum":"0001","goodSrc":"img6/CZ708_027_1.JPG"},
    ]*/
    //封装成一个ajax函数，然后给对象$
    /*var A = {
        ajax:function (json) {//传一个json格式的对象
            var req = new XMLHttpRequest();
            req.open(json.type,json.url,true);
            console.log(json.url);
            req.send();
            req.onreadystatechange = function () {
                if(req.readyState == 4 && req.status == 200){
                    var text = req.responseText;
                    var obj = JSON.parse(text);
                    console.log(obj);
                    json.success(obj);//调用了cb函数，返回cb的声明那儿
                }
            }
        }
    };*/

    //按销量排序

//    alert($("#content li").css("data-id"));
//    var numSort = document.getElementsByClassName("numSort")[0];
    //                var index;
    //                var pageNum;//每一页的个数
    var pageNum = $("#page").attr("pagelistcount");
    function pageInit(index,data,pageNum){
        //console.log(index);
        var html = "";
        //console.log(data);
        if(index == 1){
            for(var i= 0;i<pageNum;i++) {
                var tmp = data[i];
                //console.log(tmp);
                var goodName = tmp[0];
                var goodId = tmp[1];
                var goodPrice = tmp[2];
                var goodNum = tmp[3];
                var goodSrc = "images/img7/" + tmp[4];
                var goodSee = tmp[5];

                html += `<li data-id=${goodId} data-num=${goodNum} data-name=${goodName} data-price=${goodPrice} data-src=${goodSrc} class="clear">
                    <img src=${goodSrc} class="img"/>
                    <p class="clear">
                        <span class="price">特价:${goodPrice}</span><br/>
                        <span class="desc">${goodName}</span>
                        <br/>
                        <span class="see">已有${goodSee}人浏览</span>
                        <span class="num">总销量${goodNum}件</span>
                    </p>
                    <br/>
                    <div class="pay">立即购买</div>
                </li>`;
            }
            $("#content").html(html);
        }


        if(index == 2){
            for(var i=pageNum;i<data.length;i++){
                var tmp = data[i];
                //console.log(tmp);
                var goodName = tmp[0];
                var goodId = tmp[1];
                var goodPrice = tmp[2];
                var goodNum = tmp[3];
                var goodSrc = "images/img7/" + tmp[4];
                var goodSee = tmp[5];

                html += `<li data-id=${goodId} data-num=${goodNum} data-name=${goodName} data-price=${goodPrice} data-src=${goodSrc} class="clear">
                    <img src=${goodSrc} class="img"/>
                    <p class="clear">
                        <span class="price">特价:${goodPrice}</span><br/>
                        <span class="desc">${goodName}</span>
                        <br/>
                        <span class="see">已有${goodSee}人浏览</span>
                        <span class="num">总销量${goodNum}件</span>
                    </p>
                    <br/>
                    <div class="pay">立即购买</div>
                </li>`;
            }
            $("#content").html(html);
        }
    }
    //initData();
    function initData(index,pageNum) {
        $.ajax({
            type: "get",
            url: "http://bxu2359550159.my3w.com/letaophp/letao_selectall.php",
            //url: "js/tsconfig.json",
            dataType: "json",
            success: function (data) {

                //$(data).each(function (index, item){}

//                ["Casio/卡西欧 EX-TR350", "1", "4000", "1000", "1.jpg"]
                //[Object, Object, Object, Object, Object, Object]
 /*               var templis = [];
                for(var i = 0;i<data.length;i++){//过滤数据源
                    var tmp = data[i];//{"username":"lili","pwd":"123","age":19}
                    var goodName = tmp["goodName"];
                    var goodId = tmp["goodId"];
                    var goodPrice = tmp["goodPrice"];
                    var goodNum = tmp["goodNum"];
                    var goodSrc = "images/img6/" + tmp["goodSrc"];
                    var goodSee = tmp["goodSee"];
                    templis.push(tmp);
                }
                for(var i = index*pageNum;i<(index+1)*pageNum;i++){
                    if(i<templis.length){
                        var tmp = templis[i];
                        console.log(tmp);
                        var goodName = tmp["goodName"];
                        var goodId = tmp["goodId"];
                        var goodPrice = tmp["goodPrice"];
                        var goodNum = tmp["goodNum"];
                        var goodSrc = "images/img6/" + tmp["goodSrc"];
                        var goodSee = tmp["goodSee"];
                        html += `<li data-id=${goodId} data-num=${goodNum} data-name=${goodName} data-price=${goodPrice} data-src=${goodSrc} class="clear">
                    <img src=${goodSrc} class="img"/>
                    <p class="clear">
                        <span class="price">特价:${goodPrice}</span><br/>
                        <span class="desc">${goodName}</span>
                        <br/>
                        <span class="see">已有${goodSee}人浏览</span>
                        <span class="num">总销量${goodNum}件</span>
                    </p>
                    <br/>
                    <div class="pay">立即购买</div>
                </li>`;
                    }
                }
                */

                pageInit(index,data,pageNum);

            }
        })

        $(document).on("click",".searchBtn",function () {
            var seachIptVal = $(".searchIpt1").val();
            $.ajax({
                type: "get",
                url: "http://bxu2359550159.my3w.com/letaophp/searchgood.php",
                //url: "js/tsconfig.json",
                data:{content:seachIptVal},
                dataType: "json",
                success: function (dataList) {
                    //console.log(dataList);
                    var html = "";
                            if(dataList.length<=pageNum){
                                $("#page").initPage(dataList.length,1);//列表总数，当前页面
                                pageInit(1,dataList,dataList.length);
                            }else{
                                $("#page").initPage(dataList.length,1,GG.kk);//列表总数，当前页面
                            }
                }
            })
        })
    }

</script>
<link href="jQueryPage/page.css" type="text/css" rel="stylesheet">
<script src="jQueryPage/page.js"></script>
<script type="text/javascript">
    function tt(dd){
        //alert(dd);
    }
    var GG = {
        "kk":function(index){//得到当前index
            //alert(mm);
            var pageNum = $("#page").attr("pagelistcount");
            initData(index,pageNum);
        }
    }
    $("#page").initPage(17,1,GG.kk);//列表总数，当前页面
    //$("#page1").initPage(17,1,GG.kk);
</script>
<script>
    //点击商品，跳到商品详情
    $(document).on("click", "#content li", function () {
        var search = window.location.search;
        if (search.indexOf("userName") != -1) {
            var tmp = search.split("?")[1];
            var temp1 = tmp.split("&")[0];
            var temp2 = tmp.split("&")[1];
            var userName = temp1.split("=")[1];
            var id = temp2.split("=")[1];//得到用户id


            var goodid = $(this).attr("data-id") * 1;
            var num = 1;
            var goodname = $(this).attr("data-name");
            var goodprice = $(this).attr("data-price") * 1;
            var goodsrc = $(this).attr("data-src");
            //alert(goodid);
            window.location.href = "productIntroduce.html?userName="+userName+ "&goodId="+goodid + "&id="+id;
            //window.open("productIntroduce.html");
        } else {
            if (confirm("你还没有登陆，请点击确定 进入登陆页面,若没有注册，可进入登陆页面再点击注册")) {
                window.location.href = "login.html";
            }
        }
    });
    $(document).on("click",".myshoppingcar",function () {
        window.location.href = "myshoppingcar.html?userName="+userName+"&id="+id;
    });
    $(document).on("click",".womenBtn",function () {
        if (search.indexOf("userName") != -1) {
            window.location.href = "womenshoes.html?userName=" + userName+"&id="+id;
        }else {
            window.location.href = "womenshoes.html"
        }
    })

</script>

</html>